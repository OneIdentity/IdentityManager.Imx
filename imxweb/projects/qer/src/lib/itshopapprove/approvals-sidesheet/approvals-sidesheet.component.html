<div class="imx-approvals-sidesheet">
  <imx-requestinfo [request]="data.pwo">
    <ng-container info>
      <eui-alert *ngIf="data.itShopConfig.ApprovalThreshold !== 0 && hasPeerGroupAnalysis && data.pwo.PeerGroupFactor.value !== -1"
        class="helper-alert" type="info" condensed="true" [colored]="true" [dismissable]="true">
        <span *ngIf="data.pwo.PeerGroupFactor.value >= data.itShopConfig.ApprovalThreshold" translate>
          #LDS#Based on the peer group analysis, it is recommended that you approve this request.
        </span>
        <span *ngIf="data.pwo.PeerGroupFactor.value < data.itShopConfig.ApprovalThreshold" translate>
          #LDS#Based on the peer group analysis, it is recommended that you deny this request.
        </span>
      </eui-alert>
    </ng-container>
  </imx-requestinfo>

  <div class="imx-button-bar">
    <!-- TODO #241926
    <button mat-stroked-button data-imx-identifier="approvals-sidesheet-button-accept-termsofuse"
      *ngIf="approvalsService?.selectedPwo.MustApproveTermsOfUse.Value" (click)="acceptTermsOfUse()">
      {{TermsOfUseCaption}}
    </button> -->
    <!-- TODO #ADO FD 250607
    <button mat-stroked-button *ngIf="data?.pwo?.CanAskForHelp?.value"
    data-imx-identifier="approvals-sidesheet-button-ask-for-help"
    title="{{'#LDS#Send inquiry for this request to another identity' | translate}}" (click)="askForHelp()" >
    {{'#LDS#Send inquiry' | translate}}
  </button> -->
    <!-- TODO later
    <button mat-stroked-button *ngIf="data?.itShopConfig?.VI_ITShop_ApproverCanSeeShoppingCartOrder"
    data-imx-identifier="approvals-sidesheet-button-show-entire-request"
    title="{{'#LDS#Show entire request with which this product was requested' | translate}}" (click)="showEntireRequest()">
    {{'#LDS#Show entire request' | translate}}
  </button> -->
    <button mat-stroked-button data-imx-identifier="approvals-sidesheet-button-approve"
      (click)="actionService.approve([data.pwo])"> {{ '#LDS#Approve' | translate }}</button>
    <button mat-stroked-button data-imx-identifier="approvals-sidesheet-button-deny"
      (click)="actionService.deny([data.pwo])"> {{ '#LDS#Deny' | translate }}</button>
    <button mat-stroked-button *ngIf="data.pwo.canRerouteDecision(currentUserId)"
      data-imx-identifier="approvals-sidesheet-button-reroute-decision"
      title="{{'#LDS#Reroutes the approval for this request' | translate}}"
      (click)="actionService.directDecisions([data.pwo], currentUserId)">
      {{'#LDS#Reroute approval' | translate}}</button>
    <button mat-stroked-button *ngIf="data.pwo.canAddApprover(currentUserId)"
      data-imx-identifier="approvals-sidesheet-button-add-approver"
      title="{{'#LDS#Adds an additional approver for this request' | translate}}"
      (click)="actionService.addAdditionalApprovers([data.pwo])">
      {{'#LDS#Add approver' | translate}}</button>
    <button mat-stroked-button *ngIf="data.pwo.canDelegateDecision(currentUserId)"
      data-imx-identifier="approvals-sidesheet-button-delegate-approval"
      title="{{'#LDS#Delegates the approval for this request to another identity' | translate}}"
      (click)="actionService.delegateDecisions([data.pwo])">
      {{'#LDS#Delegate approval' | translate}}
    </button>
    <button mat-stroked-button *ngIf="canDenyApproval()" data-imx-identifier="approvals-sidesheet-button-deny-approval"
      title="{{'#LDS#Rejects the approval for this request and sends it back to the original approver' | translate}}"
      (click)="actionService.denyDecisions([data.pwo])">
      {{'#LDS#Reject approval' | translate}}
    </button>
    <button mat-stroked-button *ngIf="data.pwo.canWithdrawAdditionalApprover(currentUserId)"
      data-imx-identifier="approvals-sidesheet-button-withdraw--additional-approver"
      title="{{ '#LDS#Withdraws the additional approver for this request' | translate }}"
      (click)="actionService.withDrawApprover([data.pwo])">
      {{ '#LDS#Withdraw additional approver' | translate }}
    </button>

  <button mat-stroked-button *ngIf="data.pwo.canEscalateDecision"
    data-imx-identifier="approvals-sidesheet-button-escalate-approval"
    title="{{ '#LDS#Escalates the approval for this request' | translate }}" (click)="actionService.escalateDecisions([data.pwo])">
    {{'#LDS#Escalate approval' | translate}}
  </button>
    <!-- TODO later
    <button mat-stroked-button
    data-imx-identifier="approvals-sidesheet-button-change-priority"
    title="{{'#LDS#Changes the priority for this request' | translate}}" (click)="modifyPriority()">
    {{'#LDS#Change priority' | translate}}
  </button> -->
  </div>
</div>
